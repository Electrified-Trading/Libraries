// This source code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// Â© Electrified

// @version=5
// @description Utilities for measuring time.
library("Time")

// @function Gets the number of milliseconds per bar.
export bar() =>
    var int msPerDay = 1000 * 60 * 60 * 24
    var int m = if timeframe.isdaily
        msPerDay
    else if timeframe.isweekly
        msPerDay * 7
    else if timeframe.ismonthly
        msPerDay * 30
    else if timeframe.isseconds
        1000
    else if timeframe.isminutes
        1000 * 60
    var value = m * timeframe.multiplier
    value

// @function Gets the start of the day for the provided time value.
// @param datetime The date/time to acquire the date from.
// @returns The number of milliseconds representing the date for the given value.
export date(int datetime = time) =>
    timestamp(year(datetime), month(datetime), dayofmonth(datetime))

// @function Gets milliseconds from the start of the day.
// @param datetime The date/time to acquire the time of day from.
// @returns The number of milliseconds representing time of day.
export timeOfDay(int datetime = time) =>
    datetime - date(datetime)

plot(bar())